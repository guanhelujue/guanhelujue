# ==========================================
# 1. 核心基础环境 (Core Deep Learning)
# ==========================================
# 严格锁定版本，防止 Facexlib 触发升级
# 注意：cu118 还是 cu121 取决于你的实际 CUDA 环境，这里为了匹配 torch 2.0.1 推荐 cu118
--extra-index-url https://download.pytorch.org/whl/cu118

# 【防守关键点】Torch 2.0.1 必须对应 torchvision 0.15.2
# 如果这两个版本不对，facexlib 跑不起来，或者会把 torch 升级到 2.3
torch==2.0.1
torchvision==0.15.2
torchaudio==2.0.2

# Numpy 锁死在 2.0 以下
numpy==1.23.5

# 深度学习工具
deepspeed==0.15.1; sys_platform == 'linux'
lightning==2.2.4
accelerate
diffusers==0.29.0
transformers==4.41.2
x-transformers==2.11.24
modelscope==1.20.0
hydra-core==1.3.2
omegaconf==2.3.0
tensorboard==2.14.0
# 严防 tb-nightly 混入
# tb-nightly  <-- 绝对不要装这个

# ONNX
onnx==1.16.0
onnxruntime-gpu==1.18.0; sys_platform == 'linux'
onnxruntime==1.18.0; sys_platform == 'darwin' or sys_platform == 'win32'

# ==========================================
# 2. 数字人与视觉处理 (Visual & Facexlib)
# ==========================================
face_alignment
kornia
imageio
imageio-ffmpeg
av
safetensors
scikit-image
tqdm
yacs
joblib
scipy
Pillow

# ==========================================
# 3. TTS / 语音处理模块
# ==========================================
librosa==0.10.2
soundfile==0.12.1
resampy
pydub
pyworld==0.3.4
conformer==0.3.2
wetext==0.0.4
HyperPyYAML==1.2.2
inflect==7.3.1
openai-whisper
protobuf==4.25

# ==========================================
# 4. Web UI 与 服务端
# ==========================================
gradio==5.4.0
fastapi==0.115.6
fastapi-cli==0.0.4
uvicorn==0.30.0
python-dotenv
colorama
rich==13.7.1
wget==3.2
gdown==5.1.0
openai

# ==========================================
# 5. 模型下载库
# ==========================================
modelscope
huggingface_hub